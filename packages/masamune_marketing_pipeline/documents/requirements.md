# マーケティングを行いアプリのIssueを立てるアプリ

# コンセプト

定期的（毎日/毎週/毎月）GooglePlayとFirebaseAnalytics、AppStore、GithubのAPIを使ってデータを吸い上げ

その数値のグラフやサマリー、および現状の問題点と改善策をAIを使ってレポート（PDF）にしてまとめる

そのレポートをアプリやWeb、メールなどで確認する事が可能。

さらにGithubにつなげることでアプリ上から改善点を選択して、GithubのIssueを立てることが可能。そこからCopilotのAI開発につなげることができる。

当アプリは一般提供予定でサブスク（$30/月）で基本機能を利用可能。

アプリを登録して、各種アカウントを登録すると数回までは無料で利用可能する。その後はアカウントを解除しない限り有料催促の通知が来る。

## 開発の内容

### バックエンド

CloudFunctions for Firebaseにて実施。

- パイプライン開始関数
    - 定期実行（1分ごとに実行）でステータスを確認し、最終更新から（1日/7日/月替り）が確認されたものを順次処理。
    - 処理するものをマーケティング取得関数を叩いて実行
- マーケティング取得関数
    - GooglePlay、FirebaseAnalytics、AppStore、GithubのAPIを叩いてデータを取得
        - 取得するためのトークンやAPIキーはアプリ上でOAuthログイン等で取得した後Firestoreに書き込んだものを利用
    - 下記のデータを取得
        - ダウンロード数
        - インストール数
        - アンインストール数
        - アクティブユーザー数
        - ユーザーの年齢層
        - ユーザーの性別
        - 開いている国
        - 開いている言語
        - 開いている端末
        - 売上
        - 広告等のコスト
        - サーバーのコスト
        - ストア評価
        - ストアの評価コメント
        - アプリのレポジトリ
    - 上記データを元にレポートを生成
        - ダウンロード数の推移
        - アクティブユーザー数の推移
        - ユーザーの年齢層
        - ユーザーの性別
        - 開いている国
        - 開いている言語
        - 開いている端末
        - 売上
        - 広告等のコスト
        - サーバーのコスト
        - ストア評価
        - ストアの評価コメント
        - AIを使った総評
            - 画像付き
        - AIを使った改善点
            - 画像付き
    - 上記のレポートをFirestoreに書き込む
        - 最終更新日時も書き込み、連続してレポートを生成しないようにする。
        - 開始時点で最終更新日時を書き込みエラーがでたときに戻す仕組みにしないと連続してレポートが書かれてしまうか
    - さらに上記レポートを元に画像生成（NanoBananaPro）しPDFに変換してCloudStorageに保存
    - GooglePlay、FirebaseAnalytics、AppStore、Githubから各種データを取得する仕組みは別ファイルにそれぞれ切り出して使い周しできるようにしておく

### アプリ

Flutterで作成

- ログイン
    - FirebaseAuthenticationで行う
    - GoogleアカウントやAppleIDでのログインを行うのみ
- データはFirestoreを利用
- 初回はmasamune_introductionを用いてアプリの概要説明
    - その後各種認証情報の登録（スキップも可能）
    - GoogleおよびFirebaseAnalytics、GithubはOAuthログインで可能か
    - AppStoreについては可能であればOAuthで、無理そうならAPIキーの登録用の説明を載せAPIキーを登録させる
    - さらにアプリケーション登録画面へ（スキップも可能）
    - レポジトリと各GooglePlay、FirebaseAnalytics、AppStoreでのアプリがどれかを選択していく
- 設定が終わるとレポート一覧画面へ
    - 初回登録で各種情報が入力できていれば自動で初回レポート生成を行う
        - レポート生成中などの表記は必要か
    - 下部にはナビゲーションバーが設置
        - レポート一覧
        - Issue一覧
        - PR一覧
        - 設定
    - 右上にアプリケーション一覧へ遷移するボタンを設置
    - レポートをタップするとレポート画面に遷移
        - 各種グラフ等はfl_chartを使って描画
        - グラフの位置をドラッグ＆ドロップで入れ替え可能にしその表示順をローカルに保存しておく
        - 右上に共有ボタンがあり、それを共有すると生成済みのPDFをダウンロードし共有する
    - 上部に改善策が項目別にまとめられており、それをタップすると内容を表示
        - Issueを立てるボタンがあり、それをタップすると改善策をそのまま記載したIssueを作成
        - 自動でCopilotがAsigneeに入り開発がスタートする
- アプリケーション一覧画面
    - 現在アプリに登録されているアプリケーション一覧を表示
    - 次回以降はこの画面が最初に表示
    - 項目をタップするとそのアプリケーションに関連したレポート一覧画面へ遷移
    - FABにアプリケーション追加ボタンがありこれをタップするとアプリケーション登録へ進む
    - 下部にナビゲーションが設置
        - アプリケーション一覧
        - 設定
            - サブスクの設定
            - ログアウト
            - 認証情報の登録・変更
    - 右上に組織変更ボタンがありこれをタップすると組織一覧が表示され、組織の変更が可能（追加・削除は不可）

---
